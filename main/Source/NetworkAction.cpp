//==============================================================================
// Copyright Â© 2019 Big Ass Fans
//==============================================================================
#include "NetworkAction.hpp"

#include "ZAssert.hpp"
#include "Store.hpp"
#include <cstring>

//==============================================================================
// Private defines and constants
//==============================================================================

//==============================================================================
// Private typedefs
//==============================================================================

//==============================================================================
// Private variables
//==============================================================================

//==============================================================================
// Private function definitions
//==============================================================================

//==============================================================================
// Public function definitions
//==============================================================================

//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------
void NetworkAction::Accept(Store &store)
{
    store.ProcessAction(*this);
}


//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------
void NetworkAction::SetServerInfo(ServerInfo_t &si)
{
    memcpy(&mServerInfo, &si, sizeof(mServerInfo));
}

//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------
void NetworkAction::SetSsid(uint8_t *ptr, size_t size)
{
    mSsidLength = size;
    mSsid       = ptr;
}

//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------
void NetworkAction::SetPassphrase(uint8_t *ptr, size_t size)
{
    mPassphraseLength = size;
    mPassphrase       = ptr;
}

//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------
void NetworkAction::SetIsAp(bool isAp)
{
    mIsAp = isAp;
}
//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------
void NetworkAction::SetData(uint8_t *ptr, uint32_t size, ServerType type, uint32_t handle)
{
    mData.DataLength = size;
    mData.Type       = type;
    mData.Data       = ptr;
    mData.handle     = handle;
}

//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------
/*void NetworkAction::SetAccessPointList(ApList *list)
{
    SetActionType(NetworkAction::NetworkActionType::AcessPointList);
    memcpy(&mAccessPointList, &list, sizeof(list));
}*/

//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------
const NetworkAction::ServerInfo_t &NetworkAction::GetServerInfo() const
{
    return mServerInfo;
}

//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------
const uint8_t *NetworkAction::GetSsid() const
{
    return mSsid;
}

//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------
size_t NetworkAction::GetSsidLength() const
{
    return mSsidLength;
}

//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------
const uint8_t *NetworkAction::GetPassphrase() const
{
    return mPassphrase;
}

//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------
size_t NetworkAction::GetPassphraseLength() const
{
    return mPassphraseLength;
}

//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------
const NetworkAction::Data_t &NetworkAction::GetData() const
{
    return mData;
}

//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------
bool NetworkAction::GetIsAp() const
{
    return mIsAp;
}

//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------
/*ApList &NetworkAction::GetAccessPointList()
{
    return *mAccessPointList;
}*/

//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------
void NetworkAction::SetCloudConnectInfo(char *url, char *deviceId, char *cloudId)
{
    mUrl      = url;
    mDeviceId = deviceId;
    mCloudId  = cloudId;
}

//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------
void NetworkAction::SetCloudRegistrationInfo(char *url, char *deviceId)
{
    mUrl      = url;
    mDeviceId = deviceId;
}

//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------
void NetworkAction::SetCloudId(char *id)
{
    mCloudId = id;
}
//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------
char *NetworkAction::GetDeviceId()
{
    return mDeviceId;
}

//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------
char *NetworkAction::GetCloudId()
{
    return mCloudId;
}

//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------
char *NetworkAction::GetUrl()
{
    return mUrl;
}

//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------
void NetworkAction::SetIpAddress(uint32_t addr)
{
    mIpAddress = addr;
}

//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------
uint32_t NetworkAction::GetIpAddress()
{
    return mIpAddress;
}